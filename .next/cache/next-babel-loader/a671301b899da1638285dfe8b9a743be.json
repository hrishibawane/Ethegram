{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/hrishib/Desktop/Ethegram/pages/users/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport social from \"../../ethereum/social\";\nimport web3 from \"../../ethereum/web3\";\nimport Link from \"../../routes\";\nimport { List, Icon, Container } from \"semantic-ui-react\";\nimport COLORS from \"../../colors\";\n\nvar UserIndex = /*#__PURE__*/function (_Component) {\n  _inherits(UserIndex, _Component);\n\n  function UserIndex() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserIndex);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserIndex)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      users: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getUsers\", function () {\n      return _this.state.users.map(function (user, index) {\n        var score = 0;\n\n        if (user.postsCount != 0) {\n          score = user.tokens / user.postsCount;\n        }\n\n        return __jsx(List.Item, {\n          key: index,\n          style: {\n            borderRadius: \"10px\",\n            marginBottom: \"10px\",\n            backgroundColor: COLORS.divBackground,\n            padding: \"20px\",\n            border: \"2px solid\",\n            borderColor: COLORS.menuBackground\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, __jsx(List.Icon, {\n          name: \"user circle\",\n          size: \"huge\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }), __jsx(List.Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, __jsx(List.Header, {\n          style: {\n            fontSize: \"22px\",\n            margin: \"5px\",\n            marginBottom: \"10px\",\n            color: \"#003152\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, user.name), __jsx(List.Description, {\n          style: {\n            fontSize: \"16px\",\n            marginLeft: \"5px\",\n            color: COLORS.menuBackground\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, __jsx(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, user.uadd), __jsx(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, \"Score: \", score)))));\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(UserIndex, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var userCount, users;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(social.methods.userCount().call());\n\n            case 2:\n              userCount = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(Promise.all(Array(parseInt(userCount)).fill().map(function (element, index) {\n                return social.methods.peeps(index).call();\n              })));\n\n            case 5:\n              users = _context.sent;\n              console.log(users);\n              this.setState({\n                users: users\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, __jsx(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, __jsx(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Users\"), __jsx(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, this.getUsers())));\n    }\n  }]);\n\n  return UserIndex;\n}(Component);\n\nexport default UserIndex;","map":{"version":3,"sources":["/home/hrishib/Desktop/Ethegram/pages/users/index.js"],"names":["React","Component","Layout","social","web3","Link","List","Icon","Container","COLORS","UserIndex","users","state","map","user","index","score","postsCount","tokens","borderRadius","marginBottom","backgroundColor","divBackground","padding","border","borderColor","menuBackground","fontSize","margin","color","name","marginLeft","uadd","methods","userCount","call","Promise","all","Array","parseInt","fill","element","peeps","console","log","setState","getUsers"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport social from \"../../ethereum/social\";\nimport web3 from \"../../ethereum/web3\";\nimport Link from \"../../routes\";\nimport { List, Icon, Container } from \"semantic-ui-react\";\nimport COLORS from \"../../colors\";\n\nclass UserIndex extends Component {\n  state = {\n    users: []\n  };\n\n  async componentDidMount() {\n    const userCount = await social.methods.userCount().call();\n\n    const users = await Promise.all(\n      Array(parseInt(userCount))\n        .fill()\n        .map((element, index) => {\n          return social.methods.peeps(index).call();\n        })\n    );\n    console.log(users);\n    this.setState({ users: users });\n  }\n\n  getUsers = () => {\n    return this.state.users.map((user, index) => {\n      let score = 0;\n      if (user.postsCount != 0) {\n        score = user.tokens / user.postsCount;\n      }\n      return (\n        <List.Item\n          key={index}\n          style={{\n            borderRadius: \"10px\",\n            marginBottom: \"10px\",\n            backgroundColor: COLORS.divBackground,\n            padding: \"20px\",\n            border: \"2px solid\",\n            borderColor: COLORS.menuBackground\n          }}\n        >\n          <List.Icon name=\"user circle\" size=\"huge\" />\n          <List.Content>\n            <List.Header\n              style={{\n                fontSize: \"22px\",\n                margin: \"5px\",\n                marginBottom: \"10px\",\n                color: \"#003152\"\n              }}\n            >\n              {user.name}\n            </List.Header>\n            <List.Description\n              style={{ fontSize: \"16px\", marginLeft: \"5px\", color: COLORS.menuBackground }}\n            >\n              <div>\n                <p>{user.uadd}</p>\n                <p>Score: {score}</p>\n              </div>\n            </List.Description>\n          </List.Content>\n        </List.Item>\n      );\n    });\n  };\n\n  render() {\n    return (\n      <Layout>\n        <Container>\n        <h2>Users</h2>\n        <List>{this.getUsers()}</List>\n        </Container>\n      </Layout>\n    );\n  }\n}\n\nexport default UserIndex;\n"]},"metadata":{},"sourceType":"module"}